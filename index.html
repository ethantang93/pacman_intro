<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>PACMAN!</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
</head>
<style>
    .world {
        width: 540px;
    }

    .wall,
    .ground {
        width: 25px;
        height: 25px;
        background-color: blue;
        display: inline-block;
        border: 1px solid black;
        margin-top: -4px;
    }

    .ground {
        background-color: black;
    }

    .coin,
    .pacman {
        height: 15px;
        margin-top: 11px;
    }
</style>

<body>
    <div class="world"></div>
    <!-- <div class="wall"></div>
        <div class="ground"></div> -->
    <!-- <img class="pacman" src="pacman.png" alt="pacman"> -->
</body>

<script>
    var pacman = {
        x: 1,
        y: 9
    }
    var map = [
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 1, 1, 0],
        [0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0],
        [0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0],
        [0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0],
        [0, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0],
        [0, 1, 0, 1, 0, 1, 0, 1, 1, 0, 0, 1, 0, 1, 0, 0, 0, 1, 1, 0],
        [0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 1, 1, 0],
        [0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0],
        [0, 3, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
        [0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0],
        [0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0],
        [0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0],
        [0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0],
        [0, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0],
        [0, 1, 0, 1, 0, 1, 0, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0],
        [0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0],
        [0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0],
        [0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    ];

    function drawWorld() {
        $(".world").html("")
        for (var y = 0; y < map.length; y++) {
            for (var x = 0; x < map[y].length; x++) {
                if (map[y][x] == 0) {
                    $(".world").append('<div class="wall"></div>')
                } else if (map[y][x] == 1) {
                    $(".world").append('<div class="ground"><img class="coin" src="coin.gif" alt="coin_gif"></div>')
                } else if (map[y][x] == 2) {
                    $(".world").append('<div class="ground"></div>')
                } else if (map[y][x] == 3) {
                    $(".world").append('<div class="ground"><img class="pacman" src="pacman.png" alt="pacman"></div>')
                }
            }
        }
    }

    drawWorld();

    $(document).on("keydown", "html", function(e) {
                if (e.keyCode == 37) {
                    console.log("LEFT")
                    if (map[pacman.y][pacman.x - 1] !== 0) {
                        map[pacman.y][pacman.x] = 2
                        pacman.x = pacman.x - 1
                        map[pacman.y][pacman.x] = 3
                        drawWorld();
                        $('.pacman').css("transform", "rotate(180deg)");
                    }
                }
                if (e.keyCode == 38) {
                    console.log("UP")
                    if (map[pacman.y - 1][pacman.x] !== 0) {
                        map[pacman.y][pacman.x] = 2
                        pacman.y = pacman.y - 1
                        map[pacman.y][pacman.x] = 3
                        drawWorld();
                        $('.pacman').css("transform", "rotate(270deg)")

                    }
                  }
                if (e.keyCode == 39) {
                    console.log("RIGHT")
                    if (map[pacman.y][pacman.x + 1] !== 0) {
                        map[pacman.y][pacman.x] = 2
                        pacman.x = pacman.x + 1
                        map[pacman.y][pacman.x] = 3
                        drawWorld();
                    }
                }
                if (e.keyCode == 40) {
                    console.log("DOWN")
                    if (map[pacman.y + 1][pacman.x] !== 0) {
                            map[pacman.y][pacman.x] = 2
                            pacman.y = pacman.y + 1
                            map[pacman.y][pacman.x] = 3
                            drawWorld();
                            $('.pacman').css("transform", "rotate(90deg)")
                    }
                }
                })
</script>

</html>
